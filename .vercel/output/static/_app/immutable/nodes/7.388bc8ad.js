import{s as it,D as te,p as Xe,f as r,a as f,l as He,g as o,h as E,c as _,O as z,d as g,m as Ye,j as h,P,Q as A,J as ut,i as lt,y as t,V as Ze,z as J,R as mt,T as et,v as pt,A as tt,W as ct}from"../chunks/scheduler.fab10f6a.js";import{S as dt,i as ft,o as at,b as Ue,d as Ve,m as ze,a as je,t as ke,e as Me}from"../chunks/index.e45abffd.js";import{g as ae}from"../chunks/spread.8a54911c.js";import"../chunks/singletons.00f95ab0.js";import{M as _t,P as ht,c as vt}from"../chunks/public.3b10d949.js";import{I as bt}from"../chunks/image.svg.1c03fd4f.js";import{s as gt}from"../chunks/index.9135b488.js";import Ct from".prisma/client/index-browser";const Nt=Ct;var st=Nt;function nt(a){let n,u="Upgrade to Premium";return{c(){n=r("button"),n.textContent=u,this.h()},l(s){n=o(s,"BUTTON",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-5bbwxq"&&(n.textContent=u),this.h()},h(){h(n,"class","px-6 h-10 border-[1px] border-secondary text-xs font-semibold text-secondary rounded-xl justify-self-center")},m(s,T){lt(s,n,T)},d(s){s&&g(n)}}}function yt(a){let n,u;return n=new a[6]({}),{c(){Ue(n.$$.fragment)},l(s){Ve(n.$$.fragment,s)},m(s,T){ze(n,s,T),u=!0},i(s){u||(je(n.$$.fragment,s),u=!0)},o(s){ke(n.$$.fragment,s),u=!1},d(s){Me(n,s)}}}function At(a){var Je;let n,u,s,T,l,O,c,se="User Name",ne,v,K,C,I,X="Email",Q,N,H,D,B,le="Phone Number",Y,y,Z,U,V,ee="Physical Address",p,w,be,M,R,Re="Customer Type",ge,b,$,Se="Not selected",j,Ce,k,Ne,ye,W,x,Ae,Ee,Te,S,q,qe="Map Address",Ie,L,we,F,Fe="Submit",re,$e,Ge;u=new bt({props:{class:"mb-4 h-24 w-24"}});let d=!((Je=a[0].session)!=null&&Je.customerData.premium)&&nt(),xe=[{class:"input w-72 max-w-sm"},{type:"text"},{name:"userName"},a[5].userName],oe={};for(let e=0;e<xe.length;e+=1)oe=te(oe,xe[e]);let Le=[{class:"input max-w-sm"},{type:"text"},{name:"email"},a[5].email],ie={};for(let e=0;e<Le.length;e+=1)ie=te(ie,Le[e]);let Pe=[{class:"input max-w-sm"},{type:"text"},{name:"phoneNumber"},a[5].phoneNumber],ue={};for(let e=0;e<Pe.length;e+=1)ue=te(ue,Pe[e]);let Oe=[{class:"input max-w-sm"},{type:"text"},{name:"physicalAddress"},a[5].physicalAddress],me={};for(let e=0;e<Oe.length;e+=1)me=te(me,Oe[e]);function rt(e){a[16](e)}function ot(e){a[17](e)}let De={accessToken:ht,$$slots:{default:[yt]},$$scope:{ctx:a}};a[2]!==void 0&&(De.center=a[2]),a[3]!==void 0&&(De.zoom=a[3]),x=new _t({props:De}),Xe.push(()=>at(x,"center",rt)),Xe.push(()=>at(x,"zoom",ot)),x.$on("recentre",a[18]);let Be=[{class:"input max-w-sm"},{type:"text"},{name:"mapAddress"},a[5].mapAddress],pe={};for(let e=0;e<Be.length;e+=1)pe=te(pe,Be[e]);return{c(){n=r("div"),Ue(u.$$.fragment),s=f(),d&&d.c(),T=f(),l=r("form"),O=r("label"),c=r("div"),c.textContent=se,ne=f(),v=r("input"),K=f(),C=r("label"),I=r("div"),I.textContent=X,Q=f(),N=r("input"),H=f(),D=r("label"),B=r("div"),B.textContent=le,Y=f(),y=r("input"),Z=f(),U=r("label"),V=r("div"),V.textContent=ee,p=f(),w=r("input"),be=f(),M=r("label"),R=r("div"),R.textContent=Re,ge=f(),b=r("select"),$=r("option"),$.textContent=Se,j=r("option"),Ce=He("Commercial "),k=r("option"),Ne=He("Residential"),ye=f(),W=r("div"),Ue(x.$$.fragment),Te=f(),S=r("label"),q=r("div"),q.textContent=qe,Ie=f(),L=r("input"),we=f(),F=r("button"),F.textContent=Fe,this.h()},l(e){n=o(e,"DIV",{class:!0});var i=E(n);Ve(u.$$.fragment,i),s=_(i),d&&d.l(i),T=_(i),l=o(i,"FORM",{class:!0,method:!0,action:!0});var m=E(l);O=o(m,"LABEL",{});var G=E(O);c=o(G,"DIV",{class:!0,"data-svelte-h":!0}),z(c)!=="svelte-ti11bj"&&(c.textContent=se),ne=_(G),v=o(G,"INPUT",{class:!0,type:!0,name:!0}),G.forEach(g),K=_(m),C=o(m,"LABEL",{});var ce=E(C);I=o(ce,"DIV",{class:!0,"data-svelte-h":!0}),z(I)!=="svelte-1akw75"&&(I.textContent=X),Q=_(ce),N=o(ce,"INPUT",{class:!0,type:!0,name:!0}),ce.forEach(g),H=_(m),D=o(m,"LABEL",{});var de=E(D);B=o(de,"DIV",{class:!0,"data-svelte-h":!0}),z(B)!=="svelte-4dtme0"&&(B.textContent=le),Y=_(de),y=o(de,"INPUT",{class:!0,type:!0,name:!0}),de.forEach(g),Z=_(m),U=o(m,"LABEL",{});var fe=E(U);V=o(fe,"DIV",{class:!0,"data-svelte-h":!0}),z(V)!=="svelte-cy2nbc"&&(V.textContent=ee),p=_(fe),w=o(fe,"INPUT",{class:!0,type:!0,name:!0}),fe.forEach(g),be=_(m),M=o(m,"LABEL",{});var _e=E(M);R=o(_e,"DIV",{class:!0,"data-svelte-h":!0}),z(R)!=="svelte-n8823p"&&(R.textContent=Re),ge=_(_e),b=o(_e,"SELECT",{class:!0,name:!0});var he=E(b);$=o(he,"OPTION",{"data-svelte-h":!0}),z($)!=="svelte-1roo6hr"&&($.textContent=Se),j=o(he,"OPTION",{});var Ke=E(j);Ce=Ye(Ke,"Commercial "),Ke.forEach(g),k=o(he,"OPTION",{});var Qe=E(k);Ne=Ye(Qe,"Residential"),Qe.forEach(g),he.forEach(g),_e.forEach(g),ye=_(m),W=o(m,"DIV",{class:!0});var We=E(W);Ve(x.$$.fragment,We),We.forEach(g),Te=_(m),S=o(m,"LABEL",{});var ve=E(S);q=o(ve,"DIV",{class:!0,"data-svelte-h":!0}),z(q)!=="svelte-1r5jj43"&&(q.textContent=qe),Ie=_(ve),L=o(ve,"INPUT",{class:!0,type:!0,name:!0}),ve.forEach(g),we=_(m),F=o(m,"BUTTON",{class:!0,"data-svelte-h":!0}),z(F)!=="svelte-su0mq1"&&(F.textContent=Fe),m.forEach(g),i.forEach(g),this.h()},h(){h(c,"class","label"),P(v,oe),h(I,"class","label"),P(N,ie),h(B,"class","label"),P(y,ue),h(V,"class","label"),P(w,me),h(R,"class","label"),$.selected=!0,$.disabled=!0,$.__value="Not selected",A($,$.__value),j.__value=st.CustomerType.COMMERCIAL,A(j,j.__value),k.__value=st.CustomerType.RESIDENTIAL,A(k,k.__value),h(b,"class","input max-w-sm"),h(b,"name","customerType"),a[4].customerType===void 0&&ut(()=>a[14].call(b)),h(W,"class","h-56 flex-1"),h(q,"class","label"),P(L,pe),h(F,"class","bg-secondary flex mt-12 justify-center items-center rounded-xl h-12 max-w-sm text-white"),h(l,"class","grid gap-6 mt-4"),h(l,"method","post"),h(l,"action","?/updateCustomer"),h(n,"class","p-12 grid justify-items-center")},m(e,i){lt(e,n,i),ze(u,n,null),t(n,s),d&&d.m(n,null),t(n,T),t(n,l),t(l,O),t(O,c),t(O,ne),t(O,v),v.autofocus&&v.focus(),A(v,a[4].userName),t(l,K),t(l,C),t(C,I),t(C,Q),t(C,N),N.autofocus&&N.focus(),A(N,a[4].email),t(l,H),t(l,D),t(D,B),t(D,Y),t(D,y),y.autofocus&&y.focus(),A(y,a[4].phoneNumber),t(l,Z),t(l,U),t(U,V),t(U,p),t(U,w),w.autofocus&&w.focus(),A(w,a[4].physicalAddress),t(l,be),t(l,M),t(M,R),t(M,ge),t(M,b),t(b,$),t(b,j),t(j,Ce),t(b,k),t(k,Ne),Ze(b,a[4].customerType,!0),t(l,ye),t(l,W),ze(x,W,null),t(l,Te),t(l,S),t(S,q),t(S,Ie),t(S,L),L.autofocus&&L.focus(),A(L,a[4].mapAddress),t(l,we),t(l,F),re=!0,$e||(Ge=[J(v,"input",a[10]),J(N,"input",a[11]),J(y,"input",a[12]),J(w,"input",a[13]),J(b,"change",a[14]),J(b,"change",a[15]),J(L,"input",a[19]),mt(a[8].call(null,l))],$e=!0)},p(e,[i]){var G;(G=e[0].session)!=null&&G.customerData.premium?d&&(d.d(1),d=null):d||(d=nt(),d.c(),d.m(n,T)),P(v,oe=ae(xe,[{class:"input w-72 max-w-sm"},{type:"text"},{name:"userName"},i&32&&e[5].userName])),i&16&&v.value!==e[4].userName&&A(v,e[4].userName),P(N,ie=ae(Le,[{class:"input max-w-sm"},{type:"text"},{name:"email"},i&32&&e[5].email])),i&16&&N.value!==e[4].email&&A(N,e[4].email),P(y,ue=ae(Pe,[{class:"input max-w-sm"},{type:"text"},{name:"phoneNumber"},i&32&&e[5].phoneNumber])),i&16&&y.value!==e[4].phoneNumber&&A(y,e[4].phoneNumber),P(w,me=ae(Oe,[{class:"input max-w-sm"},{type:"text"},{name:"physicalAddress"},i&32&&e[5].physicalAddress])),i&16&&w.value!==e[4].physicalAddress&&A(w,e[4].physicalAddress),i&16&&Ze(b,e[4].customerType);const m={};i&8388608&&(m.$$scope={dirty:i,ctx:e}),!Ae&&i&4&&(Ae=!0,m.center=e[2],et(()=>Ae=!1)),!Ee&&i&8&&(Ee=!0,m.zoom=e[3],et(()=>Ee=!1)),x.$set(m),P(L,pe=ae(Be,[{class:"input max-w-sm"},{type:"text"},{name:"mapAddress"},i&32&&e[5].mapAddress])),i&16&&L.value!==e[4].mapAddress&&A(L,e[4].mapAddress)},i(e){re||(je(u.$$.fragment,e),je(x.$$.fragment,e),re=!0)},o(e){ke(u.$$.fragment,e),ke(x.$$.fragment,e),re=!1},d(e){e&&g(n),Me(u),d&&d.d(),Me(x),$e=!1,pt(Ge)}}}function Et(a,n,u){var ee;let s,T,{data:l}=n;const{GeolocateControl:O}=vt,{form:c,enhance:se,allErrors:ne,constraints:v}=gt(l.customerInformationForm);tt(a,c,p=>u(4,s=p)),tt(a,v,p=>u(5,T=p));let K=!0,C=[0,0],I=7,[X,Q]=((ee=s.mapAddress)==null?void 0:ee.split(","))||[];X&&Q&&(C=[Number(Q.trim()),Number(X.trim())]);function N(){s.userName=this.value,c.set(s)}function H(){s.email=this.value,c.set(s)}function D(){s.phoneNumber=this.value,c.set(s)}function B(){s.physicalAddress=this.value,c.set(s)}function le(){s.customerType=ct(this),c.set(s)}const Y=()=>u(1,K=!1);function y(p){C=p,u(2,C)}function Z(p){I=p,u(3,I)}const U=async p=>{u(2,C=[p.detail.center.lat,p.detail.center.lng])};function V(){s.mapAddress=this.value,c.set(s)}return a.$$set=p=>{"data"in p&&u(0,l=p.data)},[l,K,C,I,s,T,O,c,se,v,N,H,D,B,le,Y,y,Z,U,V]}class Dt extends dt{constructor(n){super(),ft(this,n,Et,At,it,{data:0})}}export{Dt as component};
