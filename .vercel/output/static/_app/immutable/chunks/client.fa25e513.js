async function h(n,t,o){const{callbackUrl:a=window.location.href,redirect:i=!0}=t??{},e=n==="credentials",r=e||n==="email",l=`${`/auth/${e?"callback":"signin"}/${n}`}?${new URLSearchParams(o)}`,w=await fetch("/auth/csrf"),{csrfToken:u}=await w.json(),s=await fetch(l,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...t,csrfToken:u,callbackUrl:a})}),c=await s.clone().json();if(i||!r){window.location.href=c.url??a,c.url.includes("#")&&window.location.reload();return}return s}export{h as s};
