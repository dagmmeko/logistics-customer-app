import{s as x,f as N,g as q,h as O,d as v,j as J,i as G,R as it,z as h,v as P,U as rt,Z as at,F as lt,K as ct,L as ut,M as dt,N as ft,_ as m,r as E,$ as R,o as ht,p as mt}from"./scheduler.fab10f6a.js";import{S as M,i as w,a as C,g as gt,t as D,c as _t}from"./index.e45abffd.js";import{w as I}from"./singletons.00f95ab0.js";const Z={};function bt(e,t){for(const{type:n,value:r,id:i}of e){if(document.getElementById(i)){n==="script"&&t();return}const a=document.createElement(n);a.id=i,n==="script"?(a.async=!0,a.defer=!0,a.src=r,a.onload=()=>t()):(a.rel="stylesheet",a.href=r),document.body.appendChild(a)}}function A(e,t,n,r){const i=[];for(const[s,a]of Object.entries(t)){const c=u=>{const[d,f]=a(e,u,n);r.dispatchEvent(new CustomEvent(d,{detail:f}))};e.on(s,c),i.push([s,c])}return()=>{for(const[s,a]of i)e.off(s,a)}}function yt(e,t={}){const n=[{type:"script",attr:"src",value:`//api.mapbox.com/mapbox-gl-js/${t.version}/mapbox-gl.js`,id:"byk-gl-js"},{type:"link",attr:"href",value:`//api.mapbox.com/mapbox-gl-js/${t.version}/mapbox-gl.css`,id:"byk-gl-css"}],r=t.customStylesheetUrl;r&&n.push({type:"link",attr:"href",value:r,id:"byk-mcsu-css"});let i=()=>{};return bt(n,()=>{i=pt({...t,container:e},e)}),{destroy(){i()}}}function pt(e,t){window.mapboxgl.accessToken=e.accessToken;const n=new window.mapboxgl.Map(e);return A(n,kt,window.mapboxgl,t)}const kt={dragend:e=>["dragend",{center:e.getCenter()}],drag:e=>["drag",{center:e.getCenter()}],moveend:e=>["recentre",{center:e.getCenter()}],click:(e,{lngLat:t})=>["click",{lng:t.lng,lat:t.lat}],zoomstart:e=>["zoomstart",{zoom:e.getZoom()}],zoom:e=>["zoom",{zoom:e.getZoom()}],zoomend:e=>["zoomend",{zoom:e.getZoom()}],load:(e,t,n)=>["ready",{map:e,mapbox:n}]};class zt{constructor(){this.queue=I([]),this.unsubscribe=null,this.started=!1}send(t,n=[]){t&&this.queue.update(r=>[...r,[t,n]])}start(t){this.unsubscribe=this.queue.subscribe(n=>{for(;n.length;){const[r,i]=n.shift();t[r].apply(t,i)}}),this.started=!0}stop(){this.started&&(this.unsubscribe(),this.queue=I([]),this.started=!1)}}function B(e){let t;const n=e[21].default,r=ct(n,e,e[20],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),t=!0},p(i,s){r&&r.p&&(!t||s[0]&1048576)&&ut(r,n,i,i[20],t?ft(n,i[20],s,null):dt(i[20]),null)},i(i){t||(C(r,i),t=!0)},o(i){D(r,i),t=!1},d(i){r&&r.d(i)}}}function Ct(e){let t,n,r,i,s=e[0]&&B(e);return{c(){t=N("div"),s&&s.c(),this.h()},l(a){t=q(a,"DIV",{class:!0});var c=O(t);s&&s.l(c),c.forEach(v),this.h()},h(){J(t,"class","svelte-1kuj9kb")},m(a,c){G(a,t,c),s&&s.m(t,null),n=!0,r||(i=[it(yt.call(null,t,e[1])),h(t,"ready",e[2]),h(t,"recentre",e[22]),h(t,"dragend",e[23]),h(t,"click",e[24]),h(t,"zoomstart",e[25]),h(t,"zoom",e[26]),h(t,"zoomend",e[27]),h(t,"drag",e[28]),h(t,"keydown",e[29])],r=!0)},p(a,c){a[0]?s?(s.p(a,c),c[0]&1&&C(s,1)):(s=B(a),s.c(),C(s,1),s.m(t,null)):s&&(gt(),D(s,1,1,()=>{s=null}),_t())},i(a){n||(C(s),n=!0)},o(a){D(s),n=!1},d(a){a&&v(t),s&&s.d(),r=!1,P(i)}}}function vt(e,t,n){let{$$slots:r={},$$scope:i}=t,{map:s=null}=t,{version:a="v2.12.0"}=t,{center:c=[0,0]}=t,{zoom:u=9}=t,{zoomRate:d=1}=t,{wheelZoomRate:f=1}=t,{options:g={}}=t,{accessToken:y}=t,{customStylesheetUrl:p=!1}=t,{style:k="mapbox://styles/mapbox/streets-v11"}=t;const j=rt();at(Z,{getMap:()=>s,getMapbox:()=>z});let S,z;const T=Object.assign({accessToken:y,container:S,style:k,center:c,zoom:u,zoomRate:d,wheelZoomRate:f,version:a,customStylesheetUrl:p,map:s},g),l=new zt;function _({detail:o}){n(0,s=o.map),z=o.mapbox,l.start(s),j("ready")}lt(()=>{l.stop(),n(0,s=void 0)});function F(o,b={}){l.send("fitBounds",[o,b])}function K(o,b={}){l.send("flyTo",[o,b])}function W(){l.send("resize")}function Y(o,b={}){l.send("setCenter",[o,b])}function U(o,b={}){l.send("setZoom",[o,b])}function H(o,b="top-right"){l.send("addControl",[o,b])}function L(){return s}function Q(){return z}function V(o){m.call(this,e,o)}function X(o){m.call(this,e,o)}function $(o){m.call(this,e,o)}function tt(o){m.call(this,e,o)}function et(o){m.call(this,e,o)}function nt(o){m.call(this,e,o)}function ot(o){m.call(this,e,o)}function st(o){m.call(this,e,o)}return e.$$set=o=>{"map"in o&&n(0,s=o.map),"version"in o&&n(3,a=o.version),"center"in o&&n(4,c=o.center),"zoom"in o&&n(5,u=o.zoom),"zoomRate"in o&&n(6,d=o.zoomRate),"wheelZoomRate"in o&&n(7,f=o.wheelZoomRate),"options"in o&&n(8,g=o.options),"accessToken"in o&&n(9,y=o.accessToken),"customStylesheetUrl"in o&&n(10,p=o.customStylesheetUrl),"style"in o&&n(11,k=o.style),"$$scope"in o&&n(20,i=o.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&32&&u&&U(u)},[s,T,_,a,c,u,d,f,g,y,p,k,F,K,W,Y,U,H,L,Q,i,r,V,X,$,tt,et,nt,ot,st]}class Ut extends M{constructor(t){super(),w(this,t,vt,Ct,x,{map:0,version:3,center:4,zoom:5,zoomRate:6,wheelZoomRate:7,options:8,accessToken:9,customStylesheetUrl:10,style:11,fitBounds:12,flyTo:13,resize:14,setCenter:15,setZoom:16,addControl:17,getMap:18,getMapbox:19},null,[-1,-1])}get fitBounds(){return this.$$.ctx[12]}get flyTo(){return this.$$.ctx[13]}get resize(){return this.$$.ctx[14]}get setCenter(){return this.$$.ctx[15]}get setZoom(){return this.$$.ctx[16]}get addControl(){return this.$$.ctx[17]}get getMap(){return this.$$.ctx[18]}get getMapbox(){return this.$$.ctx[19]}}function xt(e){let t,n,r;return{c(){t=N("div"),this.h()},l(i){t=q(i,"DIV",{class:!0}),O(t).forEach(v),this.h()},h(){J(t,"class","svelte-1pfu5h6")},m(i,s){G(i,t,s),e[9](t),n||(r=[h(t,"error",e[4]),h(t,"geolocate",e[5]),h(t,"outofmaxbounds",e[6]),h(t,"trackuserlocationend",e[7]),h(t,"trackuserlocationstart",e[8])],n=!0)},p:E,i:E,o:E,d(i){i&&v(t),e[9](null),n=!1,P(r)}}}function Mt(e,t,n){const{getMap:r,getMapbox:i}=R(Z),s=r(),a=i();let{position:c="top-left"}=t,{options:u={}}=t,d;const f={error:(l,_)=>["error",_],geolocate:(l,_)=>["geolocate",_],outofmaxbounds:(l,_)=>["outofmaxbounds",_],trackuserlocationend:(l,_)=>["trackuserlocationend",_],trackuserlocationstart:(l,_)=>["trackuserlocationstart",_]},g=new a.GeolocateControl(u);s.addControl(g,c),ht(()=>A(g,f,a,d));function y(){g.trigger()}function p(l){m.call(this,e,l)}function k(l){m.call(this,e,l)}function j(l){m.call(this,e,l)}function S(l){m.call(this,e,l)}function z(l){m.call(this,e,l)}function T(l){mt[l?"unshift":"push"](()=>{d=l,n(0,d)})}return e.$$set=l=>{"position"in l&&n(1,c=l.position),"options"in l&&n(2,u=l.options)},[d,c,u,y,p,k,j,S,z,T]}class wt extends M{constructor(t){super(),w(this,t,Mt,xt,x,{position:1,options:2,trigger:3})}get trigger(){return this.$$.ctx[3]}}function Zt(e,t,n){const{getMap:r,getMapbox:i}=R(Z),s=r(),a=i();let{position:c="top-right"}=t,{options:u={}}=t;const d=new a.NavigationControl(u);return s.addControl(d,c),e.$$set=f=>{"position"in f&&n(0,c=f.position),"options"in f&&n(1,u=f.options)},[c,u]}class jt extends M{constructor(t){super(),w(this,t,Zt,null,x,{position:0,options:1})}}function St(e,t,n){const{getMap:r,getMapbox:i}=R(Z),s=r(),a=i();let{position:c="bottom-right"}=t,{options:u={}}=t;const d=Object.assign({maxWidth:80,unit:"metric"},u),f=new a.ScaleControl(d);return s.addControl(f,c),e.$$set=g=>{"position"in g&&n(0,c=g.position),"options"in g&&n(1,u=g.options)},[c,u]}class Tt extends M{constructor(t){super(),w(this,t,St,null,x,{position:0,options:1})}}const It={GeolocateControl:wt,NavigationControl:jt,ScaleControl:Tt},Bt="pk.eyJ1IjoiYnJvb2tiZHQiLCJhIjoiY2xqZDFndmlhMDA3YzNlbHNhMjI5anU4OSJ9.ylIJdkwj6ayDy7ue9PnFfA";export{Ut as M,Bt as P,It as c};
